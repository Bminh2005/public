<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trang Chủ - Quản lý Dân Phố</title>
</head>

<body>
  <script>
    // 1. HÀM ĐĂNG XUẤT (ĐƯỢC GỌI TỪ CÁC TRANG KHÁC)
    // Trong hàm logout() của bạn
    function logout() {
      // 1. Xóa token và role (Hành động chính)
      localStorage.removeItem("userToken");
      localStorage.removeItem("userRole");

      // 2. Chuyển hướng về trang gốc để logic index.html xử lý
      window.location.replace("index.html");
    }

    // 2. LOGIC KIỂM TRA TRẠNG THÁI (CHUYỂN HƯỚNG)

    // Lấy thông tin từ localStorage
    const token = localStorage.getItem("userToken");
    const role = localStorage.getItem("userRole");

    if (token) {
      // Nếu đã đăng nhập, chuyển đến Dashboard hoặc trang phù hợp với vai trò
      if (role === "quan ly") {
        window.location.replace("dashboard/#");
      } else if (role === "cu dan") {
        // Ví dụ: Chuyển hướng đến trang thông tin/hồ sơ của cư dân
        window.location.replace("resident/resident.html");
      } else if (role === "tam thoi") {
        // Ví dụ: Chuyển hướng đến trang đăng ký tạm trú
        window.location.replace("newresident/newresident.html");
      } else {
        // Trường hợp có Token nhưng role không xác định
        logout(); // Đăng xuất để làm sạch
      }
    } else {
      // Nếu chưa đăng nhập, chuyển đến trang Login
      window.location.replace("Login/login.html");
    }
  </script>
  <p>Đang kiểm tra trạng thái đăng nhập...</p>
</body>

</html>